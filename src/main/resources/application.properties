# ==============================
# Application Name
# ==============================
spring.application.name=consultorio-odontologico

# ==============================
# Server Configuration
# ==============================
server.port=8080
server.servlet.context-path=/
server.compression.enabled=true

# ==============================
# PostgreSQL Configuration
# ==============================
spring.datasource.url=jdbc:postgresql://localhost:5432/consultorioOdonto
spring.datasource.username=postgres
spring.datasource.password=Variado1234
spring.datasource.driver-class-name=org.postgresql.Driver

# Connection Pool (HikariCP)
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000

# ==============================
# JPA / Hibernate Configuration
# ==============================
spring.jpa.hibernate.ddl-auto=update
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.use_sql_comments=true
spring.jpa.open-in-view=false

# Hibernate Performance
spring.jpa.properties.hibernate.jdbc.batch_size=20
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true
spring.jpa.properties.hibernate.generate_statistics=false

# ==============================
# Encoding UTF-8
# ==============================
server.servlet.encoding.charset=UTF-8
server.servlet.encoding.enabled=true
server.servlet.encoding.force=true
server.servlet.encoding.force-request=true
server.servlet.encoding.force-response=true

# ==============================
# Jackson / JSON Configuration
# ==============================
spring.jackson.serialization.write-dates-as-timestamps=false
spring.jackson.time-zone=America/Recife
spring.jackson.date-format=yyyy-MM-dd HH:mm:ss
spring.jackson.default-property-inclusion=non_null
spring.jackson.serialization.fail-on-empty-beans=false

# ==============================
# Swagger / Springdoc OpenAPI
# ==============================
springdoc.api-docs.path=/api-docs
springdoc.swagger-ui.path=/swagger-ui.html
springdoc.swagger-ui.operationsSorter=method
springdoc.swagger-ui.tagsSorter=alpha
springdoc.swagger-ui.doc-expansion=none
springdoc.swagger-ui.filter=true
springdoc.swagger-ui.tryItOutEnabled=true
springdoc.show-actuator=true

# ==============================
# Logging Configuration
# ==============================
logging.level.root=INFO
logging.level.consultorio=DEBUG
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE
logging.level.org.springframework.web=INFO
logging.level.org.springframework.security=INFO

# Log Pattern
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} - %msg%n
logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n

# ==============================
# JWT Configuration
# ==============================
jwt.secret=Y29uc3VsdG9yaW9PZG9udG9sb2dpY29TZWNyZXRLZXlKV1QyMDI1QXBwU2VjdXJl
jwt.expiration=21600000
jwt.refresh-expiration=604800000

# ==============================
# Admin Inicial
# ==============================
app.admin.username=admin
app.admin.password=Admin@2025!Consultorio
app.admin.email=admin@consultorio.com

# ==============================
# Email Configuration (Gmail)
# ==============================
spring.mail.host=smtp.gmail.com
spring.mail.port=587
spring.mail.username=${MAIL_USERNAME:seu-email@gmail.com}
spring.mail.password=${MAIL_PASSWORD:sua-senha-app}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.starttls.required=true
spring.mail.properties.mail.smtp.connectiontimeout=5000
spring.mail.properties.mail.smtp.timeout=5000
spring.mail.properties.mail.smtp.writetimeout=5000


# ==============================
# Actuator Configuration
# ==============================
management.endpoints.web.exposure.include=health,info,metrics,prometheus
management.endpoint.health.show-details=when-authorized
management.prometheus.metrics.export.enabled=true

# ==============================
# Agendamento - Configuracoes Especificas
# ==============================
# Horario comercial
agendamento.horario.inicio-manha=09:00
agendamento.horario.fim-manha=12:00
agendamento.horario.inicio-tarde=14:00
agendamento.horario.fim-tarde=17:00

# Duracao das consultas
agendamento.duracao.minima=30
agendamento.duracao.maxima=240
agendamento.duracao.padrao=60

# Capacidade
agendamento.capacidade.maxima-por-dia=20

# Lembretes
agendamento.lembrete.antecedencia-dias=1
agendamento.lembrete.horario-envio=09:00

# Fila de Espera
fila-espera.tentativas-contato.maxima=3
fila-espera.dias-expiracao=30
fila-espera.notificacao.horario=10:00

# ==============================
# Scheduling / Cron Jobs
# ==============================
spring.task.scheduling.pool.size=5

# Cron: Enviar lembretes diarios as 09:00
agendamento.cron.enviar-lembretes=0 0 9 * * *

# Cron: Processar fila de espera a cada 2 horas
agendamento.cron.processar-fila=0 0 */2 * * *

# Cron: Expirar filas antigas diariamente as 03:00
agendamento.cron.expirar-filas=0 0 3 * * *

# Cron: Marcar faltas de consultas nao finalizadas diariamente as 23:00
agendamento.cron.marcar-faltas=0 0 23 * * *

# ==============================
# Cache Configuration (opcional)
# ==============================
spring.cache.type=simple
spring.cache.cache-names=agendamentos,dentistas,pacientes

# ==============================
# Multipart / Upload Configuration
# ==============================
spring.servlet.multipart.enabled=true
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB

# ==============================
# Static Resources
# ==============================
spring.web.resources.static-locations=classpath:/static/
spring.web.resources.cache.period=3600

# ==============================
# Error Handling
# ==============================
server.error.include-message=always
server.error.include-binding-errors=always
server.error.include-stacktrace=on_param
server.error.include-exception=false

# ==============================
# Timezone
# ==============================
spring.jpa.properties.hibernate.jdbc.time_zone=America/Recife